<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Neighborhood Map Lucerne</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h1>Top 5 Sightseeing Places in Lucerne, Switzerland</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <h3>Choose the type of location you would like to visit:</h3>
          <p><select data-bind= "options: activityList, selectedOptions: chosenActivity" size="4" multiple="true"></select>
          </p>

          <h3>Labels</h3>
          <ul>
            <li>O: Outdoor Activity</li>
            <li>I: Indoor Activity</li>
          </ul>
        </div>
        <div class="col-md-9" id="map">
          <script>
            // empty array for markers
            var markers = [];
            // initialize map including markers and info windows
            function initMap() {
              // define location of map upon initialization
              var map = new google.maps.Map(document.getElementById("map"), {
                zoom: 15,
                center: {lat: 47.052216, lng: 8.310492}
              });
              // define/create info window
              var infowindow = new google.maps.InfoWindow();
              // loop through locations to create maker array
              for (var i = 0; i < allLocations.length; i++) {
                var position = allLocations[i].location;
                var name = allLocations[i].name;
                var address = allLocations[i].address;
                var label = allLocations[i].label;
                // create a marker with details from each location in location array
                 var marker = new google.maps.Marker({
                  position: position,
                  name: name,
                  address: address,
                  label: label,
                  map: map,
                });
                // push marker details to marker array
                markers.push(marker);
                // create event listener to open infowindow upon click on marker
                marker.addListener('click', function() {
                  openInfoWindow(this, infowindow);
                });
              }
              // info window to open upon click on marker and bring background
              // info stored in locations array
              function openInfoWindow(marker, infowindow) {
                // Check to make sure the infowindow is not already opened on this marker.
                if (infowindow.marker != marker) {
                  infowindow.marker = marker;
                  infowindow.setContent('<h4>' + marker.name + '</h4>' + '<div>' + marker.address +'</div>');
                  infowindow.open(map, marker);
                  // close info window upon moving to new marker
                  infowindow.addListener('closeclick', function() {
                    infowindow.marker = null;
                  });
                }
              }
            }
          </script>
        </div>
      </div>
    </div>
    <script async
      src="js/knockout.js">
    </script>
    <script async
      src="js/script.js">
    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5SshNc1e-LZwOy11DpbO4CmydjGU7vow&v=3&callback=initMap">
    </script>
  </body>
</html>
